import Samples from '/snippets/samples.mdx';

The SDK simplifies real-time speech-to-text integration by abstracting the underlying API. Designed for developers, it offers:
- Effortless implementation with minimal code to write.
- Built-in resilience with automatic error handling (e.g., reconnection on network drops) ensures uninterrupted transcription. No need to manually manage retries or state recovery.

## Install the SDK

<CodeGroup>

```sh JavaScript
npm install @gladiaio/sdk
```

```sh Python
# Coming soon
```

</CodeGroup>

<CodeGroup>

```javascript JavaScript
import { GladiaClient } from "@gladiaio/sdk";
```

```python Python
# Coming soon
```

</CodeGroup>

## Initiate your real-time session

First, call the [ endpoint](/api-reference/v2/live/init) and pass your configuration.
It's important to correctly define the properties `encoding`, `sample_rate`, `bit_depth` and `channels` as we need them to parse your audio chunks.

<CodeGroup>

```typescript JavaScript
const gladiaClient = new GladiaClient({
  apiKey: <YOUR_GLADIA_API_KEY>,
});

const gladiaConfig = {
  model: "solaria-1",
  encoding: 'wav/pcm',
  sample_rate: 16000,
  bit_depth: 16,
  channels: 1,
  language_config: {
    languages: ["fr"],
    code_switching: false,
  },
};

const liveSession = gladiaClient.liveV2().startSession(gladiaConfig);
```

```python Python
# Coming soon
```

</CodeGroup>


## Connect to the WebSocket

Now that you've initiated the session and have the URL, you can connect to the WebSocket using your preferred language/framework. Here's an example in JavaScript:

<CodeGroup>

```typescript JavaScript
liveSession.on("message", (message) => {
  // Handle messages from the API
});
liveSession.on("started", (message) => {
  // Handle start session message
});
liveSession.on("ended", (message) => {
  // Handle end session message
});
liveSession.on("error", (message) => {
  // Handle error message
});
```

```python Python
  # Coming soon
```

</CodeGroup>

## Send audio chunks

You can now start sending us your audio chunks through the WebSocket:

<CodeGroup>


```typescript JavaScript
liveSession.sendAudio(buffer)
```

```python Python
# Coming soon
```

</CodeGroup>

## Read messages
During the whole session, we will send various messages through the WebSocket, the callback URL or webhooks. You can specify which kind of messages you want to receive in the initial configuration. See [`messages_config`](/api-reference/v2/live/init) for WebSocket messages and [`callback_config`](/api-reference/v2/live/init) for callback messages.

Here's an example of how to read a [`transcript`](/api-reference/v2/live/message/transcript) message received through a WebSocket:

<CodeGroup>

```javascript JavaScript
liveSession.on("message", (message) => {
  if (message.type === 'transcript' && message.data.is_final) {
    console.log(`${message.data.id}: ${message.data.utterance.text}`)
});
```

```python Python
# Coming soon
```
</CodeGroup>

## Stop the recording

Once you're done, send us the `stop_recording` message. We will process remaining audio chunks and start the post-processing phase, in which we put together the final audio file and results with the add-ons you requested.

You'll receive a message at every step of the process in the WebSocket, or in the callback if configured. Once the post-processing is done, the WebSocket is closed with a code 1000.

<CodeGroup>


```javascript JavaScript
liveSession.stopRecording()
```

```python Python
# Coming soon
```

</CodeGroup>

## Get the final results

If you want to get the complete result, you can call the [`GET /v2/live/:id` endpoint](/api-reference/v2/live/get) with the `id` you received from the initial request.

<CodeGroup>

```javascript JavaScript
  const response = await fetch(`https://api.gladia.io/v2/live/${sessionId}`, {
    method: 'GET',
    headers: {
      'X-Gladia-Key': '<YOUR_GLADIA_API_KEY>',
    },
  });
  if (!response.ok) {
    // Look at the error message
    // It might be a configuration issue
    console.error(`${response.status}: ${(await response.text()) || response.statusText}`)
    return;
  }

  const result = await response.json();
  console.log(result)
```


```bash cURL
curl --request GET \
  --url https://api.gladia.io/v2/live/ID_OF_THE_SESSION \
  --header 'x-gladia-key: <YOUR_GLADIA_API_KEY>'
```

</CodeGroup>